# 使用 npm 进行语义版本控制

如果 Node.js 包中有一件很棒的事情，那就是他们都同意使用语义版本控制来进行版本编号。

语义版本控制的概念很简单：所有版本都有 3 位数字：`x.y.z`。

- 第一个数字是主要版本
- 第二个数字是次要版本
- 第三位数字是补丁版本

当你发布一个新版本时，你不只是随心所欲地增加一个数字，而是你有规则：

- 当您进行不兼容的 API 更改时升级主版本
- 当您以向后兼容的方式添加功能时，您会升级次要版本
- 当您进行向后兼容的错误修复时，您会升级补丁版本

该约定在所有编程语言中都被采用，并且每个 `npm` 包都遵守它非常重要，因为整个系统都依赖于它。

为什么这么重要？

因为 `npm` 设置了一些规则，我们可以在 `package.json` 文件中使用来选择它可以更新我们的包的版本，当我们运行 `npm update` 时。

规则使用这些符号：

- `^`

- `~`
- `>`
- `>=`

- `<`
- ``<=`
- `=`
- `-`
- `||`

让我们详细看看这些规则：

- `^`：它只会做不改变最左边的非零数字的更新，即次要版本或补丁版本可能会发生变化，但主要版本不会发生变化。如果你写了`^13.1.0`，当运行`npm update`时，它可以更新到`13.2.0`，`13.3.0`甚至`13.3.1`，`13.3.2`等等，但不是到`14.0.0`或更高版本。
- `~`：如果你在运行`npm update`时写`~0.13.0`，它可以更新到补丁版本：`0.13.1`可以，但`0.14.0`不行。
- `>`：您接受任何高于您指定的版本
- `>=`：您接受等于或高于您指定的版本的任何版本
- `<=`：您接受任何等于或低于您指定的版本
- `<`：您接受任何低于您指定的版本
- `=`：你接受那个确切的版本
- `-`：您接受一系列版本。示例：`2.1.0 - 2.6.2`
- `||`：你组合集合。示例：`< 2.1 || > 2.6`

您可以组合其中一些符号，例如使用 `1.0.0 || >=1.1.0 <1.2.0` 使用 1.0.0 或 1.1.0 以上的一个版本，但低于 1.2.0。

还有其他规则：

- 无符号：您只接受您指定的特定版本（`1.2.1`）
- `latest`：你想使用可用的最新版本